{% from "src/pug/_macros.j2" import paper %}

doctype html
html(lang='en')

    head

        meta(charset='utf-8')
        meta(name='viewport', content='width=device-width, initial-scale=1, shrink-to-fit=no')
        meta(name="description", content="research, investigacion, science, ciencia, mathematics, matematicas, algebra, topology, topologia, homotopy, homotopia, homology, homologia, k-theory, teoria k, category theory, categorias, representation theory, teorÃ­a de representaciones, university of seville, universidad de sevilla")
        meta(name="author", content="Fernando Muro")
        meta(name="format-detection", content="telephone=no")
        meta(name="theme-color", content="#fff", media="(prefers-color-scheme: light)")
        meta(name="theme-color", content="#212529;", media="(prefers-color-scheme: dark)")
        
        title Fernando Muro's preprints

        // Core theme JS
        script(src='js/darkmode.js')

        // Google fonts
        link(rel="preconnect", href="https://fonts.googleapis.com")
        link(rel="preconnect", href="https://fonts.gstatic.com", crossorigin)
        link(href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&display=swap", rel="stylesheet")
        link(href="https://fonts.googleapis.com/css2?family=Merriweather+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet")

        // Favicon
        link(rel="apple-touch-icon", sizes="180x180", href="assets/ico/apple-touch-icon.png")
        link(rel="icon", type="image/png", sizes="32x32", href="assets/ico/favicon-32x32.png")
        link(rel="icon", type="image/png", sizes="16x16", href="assets/ico/favicon-16x16.png")
        link(rel="manifest", href="assets/ico/site.webmanifest")
        link(rel="mask-icon", href="assets/ico/safari-pinned-tab.svg", color="#5bbad5")
        link(rel="shortcut icon", href="assets/ico/favicon.ico")
        meta(name="msapplication-TileColor", content="#da532c")
        meta(name="msapplication-config", content="assets/ico/browserconfig.xml")
        meta(name="theme-color", content="#ffffff")

        // Academicons
        link(rel="stylesheet", href="assets/css/academicons.min.css")

        // Icomoon
        link(rel="stylesheet", href="assets/css/icomoon.css", type="text/css")

        // SimpleLightbox plugin CSS
        link(href='assets/css/simpleLightbox.min.css', rel='stylesheet')

        // Core theme CSS (includes Bootstrap)
        link(href='css/styles.css', rel='stylesheet')

        // MathJax
        script(src="js/mathjax-config.js", defer)
        script(type="text/javascript", id="MathJax-script", defer, src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js")

    body#page-top

        // Navigation
        nav#secondaryNav.navbar.navbar-expand-lg.navbar-light.fixed-top.py-3
            .container.px-4.px-lg-5
                a.navbar-brand(href='index.html#page-top') Fernando Muro
                button.navbar-toggler.navbar-toggler-right(type='button', data-bs-toggle='collapse', data-bs-target='#navbarResponsive', aria-controls='navbarResponsive', aria-expanded='false', aria-label='Toggle navigation')
                    span.navbar-toggler-icon
                #navbarResponsive.collapse.navbar-collapse
                    ul.navbar-nav.ms-auto.my-2.my-lg-0
                        li.nav-item.dropdown
                            a#navbarDropdownMenuLink.nav-link.dropdown-toggle(href='index.html#research', data-toggle="dropdown", aria-haspopup="true", aria-expanded="false") Research
                            ul.dropdown-menu.border-3(aria-labelledby="navbarDropdownMenuLink")
                                li.nav-item 
                                    a.nav-link(href="#page-top", style="color: #f4623a;") Preprints
                                li.nav-item 
                                    a.nav-link(href="papers.html") Papers
                                li.nav-item 
                                    a.nav-link(href="presentations.html") Presentations
                        li.nav-item
                            a.nav-link(href='index.html#docencia') Docencia
                        li.nav-item
                            a.nav-link(href='index.html#portfolio') Gallery
                        li.nav-item
                            a.nav-link(href='index.html#about') About
                        li.nav-item
                            a.nav-link(href='index.html#contact') Contact

        // Cards
        section#preprintspage.page-section
            .container.px-4.px-lg-5
                h2.text-center.mt-3
                    .bi.bi-journal &nbsp; Preprints
                hr.divider
                .row.row-cols-1.gx-5.gy-4.mb-4
                {% for entry in input %}
                {% if entry.type == '' and (entry.issued['date-parts'][0][0] | int) > 2020%}
                {% if entry.type == '' %}
                    {% for name in entry.author %}
                    {% if name.family in extras.coauthors.keys() %}
                    {% do name.update({'url': extras.coauthors[name.family]}) %}
                    {% endif %}
                    {% endfor %}
                    {% filter indent(width=20) %}
                    {{ paper(entry.id, entry.author, entry.title, entry.issued['date-parts'][0][0], entry.type, entry['container-title'], entry.volume, entry.issue, entry.series, entry.page, entry.note, entry.DOI, entry.arxiv, entry.abstract, entry.bibtex, entry['zbmath_url']) }}
                    {% endfilter -%}
                {% endif -%}
                {% endif -%}
                {% endfor %}

        // Footer
        footer.py-5
            .container.px-4.px-lg-5
                .small.text-center.text-muted
                    | Copyright &copy; 2024 - 
                    a(href="#page-top") Fernando Muro
                    |. Powered by 
                    a(href='https://startbootstrap.com') Start Bootstrap 
                    | with 
                    a(href='https://startbootstrap.com/theme/creative') Creative 
                    | theme.

        // Bootstrap core JS
        script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js')

        // SimpleLightbox plugin JS
        script(src='js/simpleLightbox.min.js', rel="stylesheet")

        // Core theme JS
        script(src='js/scripts.js')